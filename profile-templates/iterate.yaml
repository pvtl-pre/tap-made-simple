#@ load("@ytt:data","data")
#@ load("@ytt:base64","base64")
---
profile: iterate
ceip_policy_disclosed: true

shared:
  ingress_domain: #@ data.values.clusters.iterate_cluster.ingress_domain
  ca_cert_data: #@ base64.decode(data.values.tls.cert_data)

buildservice:
  kp_default_repository: #@ "{}/{}/iterate".format(data.values.registry.fqdn, data.values.registry.system_project)
  kp_default_repository_username: #@ data.values.registry.username
  kp_default_repository_password: #@ data.values.registry.password
  exclude_dependencies: false

supply_chain: testing

ootb_supply_chain_testing:
  registry:
    server: #@ data.values.registry.fqdn
    repository: #@ "{}/iterate-workloads".format(data.values.registry.system_project)
  gitops:
    ssh_secret: ""

cnrs:
  domain_name: #@ data.values.clusters.iterate_cluster.ingress_domain
  domain_template: "{{.Name}}-{{.Namespace}}.{{.Domain}}"
  default_tls_secret: "tap-install/wildcard"

contour:
  envoy:
    service:
      type: LoadBalancer

appliveview_connector:
  backend:
    sslDisabled: false
    host: #@ "appliveview.{}".format(data.values.clusters.view_cluster.ingress_domain)
